import{C as g,c as y,R as e,r as o}from"./CreateReactScript-CMiyu2aM.js";import{T as F,R as m,M as p,I as r,a as f}from"./InputFormGroup-D8ox2Ahx.js";import{C as E}from"./ClientsRest-DMeIUk5h.js";import{A as _}from"./Adminto-6gONrFtF.js";import{T as L}from"./TextareaFormGroup-CBD3JNOk.js";import{m as b,D as N,a as k}from"./DropdownItem-tLOoR8JD.js";b.locale("es");const v=({statuses:s})=>{const n=o.useRef(),d=o.useRef(),c=o.useRef(),[R,C]=o.useState(!1),[a,h]=o.useState({}),x=t=>{C(!1),$(c.current).modal("show")},T=t=>{h(t),$(d.current).modal("show")},u=async(t,l)=>{await E.clientStatus(t,l)&&$(n.current).dxDataGrid("instance").refresh()};return e.createElement(e.Fragment,null,e.createElement(F,{gridRef:n,title:"Leads",rest:E,toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"REFRESCAR TABLA",onClick:()=>$(n.current).dxDataGrid("instance").refresh()}}),t.unshift({widget:"dxButton",location:"after",options:{icon:"plus",hint:"NUEVO REGISTRO",onClick:()=>x()}})},filterValue:["client_status.id","<>",12],columns:[{dataField:"contact_name",caption:"Cliente"},{dataField:"contact_email",caption:"Correo"},{dataField:"contact_phone",caption:"Telefono"},{dataField:"client_status.id",caption:"ID estado cliente",visible:!1},{dataField:"client_status.name",caption:"Estado del cliente",dataType:"string",cellTemplate:(t,{data:l})=>{t.attr("style","display: flex; gap: 4px; overflow: unset"),m(t,e.createElement(N,{className:"btn btn-xs btn-white rounded-pill",title:l.client_status.name,tippy:"Actualizar estado"},s.map(({id:i,name:w})=>e.createElement(k,{key:i,onClick:()=>u(l.id,i)},w))))}},{dataField:"created_at",caption:"Fecha creacion",dataType:"datetime",cellTemplate:(t,{data:l})=>{t.text(b(l.created_at).format("LL"))},sortOrder:"desc"},{caption:"Acciones",cellTemplate:(t,{data:l})=>{t.attr("style","display: flex; gap: 4px; overflow: unset"),m(t,e.createElement(f,{className:"btn btn-xs btn-soft-success",title:"Convertir en cliente",onClick:()=>u(l.id,12)},e.createElement("i",{className:"fa fa-user-plus"}))),m(t,e.createElement(f,{className:"btn btn-xs btn-soft-primary",title:"Ver lead",onClick:()=>T(l)},e.createElement("i",{className:"fa fa-comment"})))},allowFiltering:!1,allowExporting:!1}]}),e.createElement(p,{modalRef:d,title:`Lead de ${a==null?void 0:a.contact_name}`,onSubmit:t=>{t.preventDefault(),$(c.current).modal("hide")}},e.createElement("div",null,e.createElement("p",null,e.createElement("b",null,"Telefono"),": ",a==null?void 0:a.contact_phone),e.createElement("p",{className:"my-2"},e.createElement("b",null,"Correo"),": ",a==null?void 0:a.contact_email),e.createElement("b",null,"Mensaje"),":",e.createElement("p",null,a==null?void 0:a.message))),e.createElement(p,{modalRef:c,title:R?"Editar lead":"Nuevo lead"},e.createElement("div",{className:"row"},e.createElement(r,{label:"Nombre completo",required:!0}),e.createElement(r,{label:"Correo electronico",col:"col-md-6",required:!0}),e.createElement(r,{label:"Telefono",col:"col-md-6",required:!0}),e.createElement(r,{label:"Empresa / Marca",col:"col-md-6"}),e.createElement(r,{label:"Link de WEB",col:"col-md-6"}),e.createElement(L,{label:"Mensaje",placeholder:"Ingresa tu mensaje",rows:4,required:!0}))))};g((s,n)=>{y(s).render(e.createElement(_,{session:n.session,title:"Leads"},e.createElement(v,{...n})))});
