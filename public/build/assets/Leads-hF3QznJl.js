import{C as b,c as C,R as e,r as o}from"./CreateReactScript-CMiyu2aM.js";import{T as x,R as r,M as y,a as d}from"./TippyButton-DUaps99m.js";import{C as p}from"./ClientsRest-DMeIUk5h.js";import{A as _}from"./Adminto-6gONrFtF.js";import{m as u,D as h,a as T}from"./DropdownItem-CXiJPpAc.js";u.locale("es");const w=({statuses:s})=>{const l=o.useRef(),i=o.useRef(),[a,f]=o.useState({}),E=t=>{f(t),$(i.current).modal("show")},m=async(t,n)=>{await p.clientStatus(t,n)&&$(l.current).dxDataGrid("instance").refresh()};return e.createElement(e.Fragment,null,e.createElement(x,{gridRef:l,title:"Leads",rest:p,toolBar:t=>{t.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"REFRESCAR TABLA",onClick:()=>$(l.current).dxDataGrid("instance").refresh()}})},filterValue:["client_status.id","<>",12],columns:[{dataField:"contact_name",caption:"Cliente"},{dataField:"contact_email",caption:"Correo"},{dataField:"contact_phone",caption:"Telefono"},{dataField:"client_status.id",caption:"ID estado cliente",visible:!1},{dataField:"client_status.name",caption:"Estado del cliente",dataType:"string",cellTemplate:(t,{data:n})=>{t.attr("style","display: flex; gap: 4px; overflow: unset"),r(t,e.createElement(h,{className:"btn btn-xs btn-white rounded-pill",title:n.client_status.name,tippy:"Actualizar estado"},s.map(({id:c,name:R})=>e.createElement(T,{key:c,onClick:()=>m(n.id,c)},R))))}},{dataField:"created_at",caption:"Fecha creacion",dataType:"datetime",cellTemplate:(t,{data:n})=>{t.text(u(n.created_at).format("LL"))},sortOrder:"desc"},{caption:"Acciones",cellTemplate:(t,{data:n})=>{t.attr("style","display: flex; gap: 4px; overflow: unset"),r(t,e.createElement(d,{className:"btn btn-xs btn-soft-success",title:"Convertir en cliente",onClick:()=>m(n.id,12)},e.createElement("i",{className:"fa fa-user-plus"}))),r(t,e.createElement(d,{className:"btn btn-xs btn-soft-primary",title:"Ver lead",onClick:()=>E(n)},e.createElement("i",{className:"fa fa-comment"})))},allowFiltering:!1,allowExporting:!1}]}),e.createElement(y,{modalRef:i,title:`Lead de ${a==null?void 0:a.contact_name}`,onSubmit:t=>{t.preventDefault(),$(modalRef.current).modal("hide")}},e.createElement("div",null,e.createElement("p",null,e.createElement("b",null,"Telefono"),": ",a==null?void 0:a.contact_phone),e.createElement("p",{className:"my-2"},e.createElement("b",null,"Correo"),": ",a==null?void 0:a.contact_email),e.createElement("b",null,"Mensaje"),":",e.createElement("p",null,a==null?void 0:a.message))))};b((s,l)=>{C(s).render(e.createElement(_,{session:l.session,title:"Leads"},e.createElement(w,{...l})))});
