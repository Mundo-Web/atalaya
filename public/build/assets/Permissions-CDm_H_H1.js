import{C as T,c as g,R as t,r as a}from"./CreateReactScript-BPb0oCFQ.js";import{A as x}from"./Adminto-DvH23jnX.js";import{T as F,R as l,M as v,I as y,a as E}from"./InputFormGroup-Dqe-63Hj.js";import"./JSEncrypt-D3I3x59l.js";import{P as m}from"./PermissionsRest-DIPNL9vw.js";import{m as R}from"./index-BuvcFxz3.js";import{T as w}from"./TextareaFormGroup-Da32IrqJ.js";const A=({PUBLIC_RSA_KEY:u})=>{const n=a.useRef(),i=a.useRef(),s=a.useRef(),o=a.useRef(),c=a.useRef(),[p,d]=a.useState(!1),f=e=>{e!=null&&e.id?d(!0):d(!1),s.current.value=(e==null?void 0:e.id)||null,o.current.value=(e==null?void 0:e.name)||null,c.current.value=(e==null?void 0:e.description)||null,$(i.current).modal("show")},h=async e=>{e.preventDefault();const r={id:s.current.value||void 0,name:o.current.value,description:c.current.value};await m.save(r)&&($(n.current).dxDataGrid("instance").refresh(),$(i.current).modal("hide"))},b=async e=>{await m.delete(e)&&$(n.current).dxDataGrid("instance").refresh()};return t.createElement(t.Fragment,null,t.createElement(F,{gridRef:n,title:"Permisos",rest:m,toolBar:e=>{e.unshift({widget:"dxButton",location:"after",options:{icon:"refresh",hint:"REFRESCAR TABLA",onClick:()=>$(n.current).dxDataGrid("instance").refresh()}}),e.unshift({widget:"dxButton",location:"after",options:{icon:"plus",hint:"NUEVO REGISTRO",onClick:()=>f()}})},columns:[{dataField:"id",caption:"ID",dataType:"number",sortOrder:"asc"},{dataField:"name",caption:"Permiso"},{dataField:"description",caption:"Descripcion"},{dataField:"created_at",caption:"Fecha creacion",dataType:"date",cellTemplate:(e,{data:r})=>{l(e,t.createElement("span",null,R(r.created_at).format("LL")))}},{dataField:"updated_at",caption:"Fecha actualizacion",dataType:"date",cellTemplate:(e,{data:r})=>{l(e,t.createElement("span",null,R(r.updated_at).format("LL")))}},{caption:"Acciones",cellTemplate:(e,{data:r})=>{e.attr("style","display: flex; gap: 4px; overflow: unset"),l(e,t.createElement(E,{className:"btn btn-xs btn-soft-primary",title:"Editar",onClick:()=>f(r)},t.createElement("i",{className:"fa fa-pen"}))),l(e,t.createElement(E,{className:"btn btn-xs btn-soft-danger",title:"Eliminar",onClick:()=>b(r.id)},t.createElement("i",{className:"fa fa-trash-alt"})))},allowFiltering:!1,allowExporting:!1}]}),t.createElement(v,{modalRef:i,title:p?"Editar rol":"Agregar rol",onSubmit:h},t.createElement("div",{className:"row"},t.createElement("input",{ref:s,type:"hidden"}),t.createElement(y,{eRef:o,label:"Permiso",col:"col-12",required:!0,disabled:p}),t.createElement(w,{eRef:c,label:"Descripcion",col:"col-12"}))))};T((u,n)=>{g(u).render(t.createElement(x,{...n,title:"Permisos"},t.createElement(A,{...n})))});
