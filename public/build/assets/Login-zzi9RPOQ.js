import{C as b,c as w,R as e,r as t,m as l}from"./CreateReactScript-Cp5m6EeI.js";import{J as h}from"./JSEncrypt-D3I3x59l.js";const v=({PUBLIC_RSA_KEY:a,token:r})=>{document.title="Login | Gestion de clientes";const o=new h;o.setPublicKey(a);const[d,n]=t.useState(!0),f=t.useRef(),c=t.useRef(),m=t.useRef(),u=t.useRef();window.onload=async()=>{n(!1)};const p=async g=>{g.preventDefault(),n(!0);try{const s=c.current.value,E=m.current.value,{status:y,result:i}=await l.Fetch("./api/login",{method:"POST",body:JSON.stringify({email:o.encrypt(s),password:o.encrypt(E),_token:r})});if(!y)throw new Error((i==null?void 0:i.message)||"Error al iniciar sesion");l.Notify.add({icon:"/assets/img/logo.svg",title:"Operacion correcta",body:"Se inicio sesion correctamente"}),location.href="./home"}catch(s){l.Notify.add({icon:"/assets/img/logo.svg",title:"Error",body:s.message,type:"danger"})}finally{n(!1)}};return e.createElement(e.Fragment,null,e.createElement("div",{ref:u,id:"loader",style:{display:d?"flex":"none"}},e.createElement("span",null)),e.createElement("div",{id:"main"},e.createElement("span",{id:"square"}),e.createElement("span",{id:"triangle"}),e.createElement("form",{ref:f,method:"POST",action:"./login",className:"form",autoComplete:"off",onSubmit:p},e.createElement("div",{className:"form-header"},e.createElement("div",{className:"form-img"},e.createElement("img",{id:"image",src:"assets/img/logo.svg",alt:"SoDe World"})),e.createElement("h2",{className:"form-title"},"Gestion de clientes"),e.createElement("p",{className:"form-description"},"Inicie sesion para continuar")),e.createElement("div",{className:"form-body"},e.createElement("div",null,e.createElement("input",{className:"form-control",autoComplete:"off",ref:c,id:"email",required:!0}),e.createElement("label",{className:"form-label",htmlFor:"email"},"Usuario")),e.createElement("div",null,e.createElement("input",{className:"form-control",autoComplete:"off",ref:m,id:"password",name:"password",type:"password",required:!0}),e.createElement("label",{className:"form-label",htmlFor:"password"},"ConstraseÃ±a")),e.createElement("button",{id:"btn_submit",type:"submit"},"Iniciar sesion"))),e.createElement("a",{id:"copyright",href:"//mundoweb.pe",target:"_blank"},"Propiedad de Mundo Web")))};b((a,r)=>{w(a).render(e.createElement(v,{...r}))});
